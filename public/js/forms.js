function readFile(a){if(console.log(a),a.files&&a.files[0])if(a.files[0].size/1024<=2e3){var b=new FileReader;b.onload=function(a){$uploadCrop.croppie("bind",{url:a.target.result})},b.readAsDataURL(a.files[0])}else swal("Oops...","the image upload is restricted to 2MB files.","error"),resetEl($("#full-img"));else swal("Oops...","your browser doesn't support the FileReader API")}function setImageData(){fileSelected&&$uploadCrop.croppie("result",{type:"base64",size:"viewport",format:"png",quality:.8,circle:!1}).then(function(a){$("#img").val(a),$("#emblem").val(a)})}function resetEl(a){a.wrap("<form>").closest("form").get(0).reset(),a.unwrap()}function setPreview(a){if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(a){$(".banner>img").attr("src",a.target.result)},b.readAsDataURL(a.files[0])}else $(".banner").hide()}function setCoords(){var a=$("#number").val()+"+"+$("#street").val()+"+"+$("#zip").val()+"+"+$("#city").val();$.get("https://maps.google.com/maps/api/geocode/json?sensor=false&key=AIzaSyDuJIisroEDUZcSowh6tqA_LG9Vmn1C4IQ&address="+a,function(a){if($("#map").length>0&&(pos=new google.maps.LatLng(a.results[0].geometry.location.lat,a.results[0].geometry.location.lng),map.setCenter(pos),map.setZoom(15),marker.setPosition(pos)),$("").length>0)for(var b=0;b<a.results[0].address_components.length;b++)for(var c=0;c<a.results[0].address_components[b].types.length;c++)"country"==a.results[0].address_components[b].types[c]&&(country=a.results[0].address_components[b],$("#country").val(country.long_name));$("#coords").val(a.results[0].geometry.location.lat+";"+a.results[0].geometry.location.lng)})}function initMap(){map=addContactGoogleMaps("map",pos.lat,pos.lng)}function addContactGoogleMaps(a,b,c){function k(a){j.setCenter(a)}var d=9,e=!0,f=!1,g=new google.maps.StyledMapType([{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#ccc"},{lightness:10}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#c6c6c6"},{lightness:10},{visibility:"simplified"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:10}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{lightness:17},{color:"#cc4020"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#232427"},{lightness:1},{visibility:"on"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#434548"},{lightness:1}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19},{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]}],{name:"Styled Map"}),h=new google.maps.LatLng(b,c),i={zoom:d,panControl:!0,zoomControl:e,scaleControl:!0,mapTypeControl:!1,streetViewControl:!1,overviewMapControl:!1,minZoom:2,scrollwheel:f,center:h,mapTypeId:google.maps.MapTypeId.ROADMAP},j=new google.maps.Map(document.getElementById(a),i);return j.mapTypes.set("map_style",g),j.setMapTypeId("map_style"),marker=new google.maps.Marker({position:h,map:j}),k(h),google.maps.event.addDomListener(window,"resize",function(){k(h)}),j}function ajaxSubmit(a){$.post(a.attr("action"),a.serialize(),function(){a.trigger("reset"),$("#team").val("").trigger("change"),getFeed()})}function postOnEnter(a,b){13!=b.keyCode||""==$(a).value||b.shiftKey||$(a.form).submit()}var uploadCrop,map,marker,pos={lat:51.1791705,lng:4.4191379},fileSelected=!1;$(function(){$("#coords").length>0&&($("#street, #number, #zip, #city").on("change",function(){setCoords()}),$("#map").length>0&&initMap()),$("#banner").length>0&&$("#banner").on("change",function(){setPreview(this)}),$("#preview-img").length>0&&($uploadCrop=$("#preview-img").croppie({enableExif:!0,viewport:{width:250,height:250,type:"square"},boundary:{width:300,height:300}}),$("#full-img").on("change",function(){fileSelected=!0,readFile(this)})),$(".image-form").submit(function(a){setImageData()}),$("#post-form").submit(function(a){a.preventDefault(),ajaxSubmit($(this))}),$('textarea[name="post"]').keydown(function(a){postOnEnter(this,a)}),$("#enter-form, #settle-game-form").submit(function(a){a.preventDefault(),ajaxSubmit($(this)),$("#enter-event").modal("toggle"),$("#settle-game").modal("toggle")}),$(".game-settle").click(function(a){$team1=$("#settle-game .team_1"),$team2=$("#settle-game .team_2"),$("#settle-game-form").attr("action",$(this).data("action")),$team1.find(".title").text($(this).find(".team_1 .title").text()),$team1.find(".profile-img>img").attr("src",$(this).find(".team_1 .profile-img>img").attr("src")),$team2.find(".title").text($(this).find(".team_2 .title").text()),$team2.find(".profile-img>img").attr("src",$(this).find(".team_2 .profile-img>img").attr("src"))})});